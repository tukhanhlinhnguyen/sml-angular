<!-- Sign In Modal-->
<ng-template #toggleFirstModal let-modal>
    <div class="modal-content">
        <div class="modal-header bg-secondary">
            <ul class="nav nav-tabs card-header-tabs" role="tablist" ngbNav #nav="ngbNav">
                <li [ngbNavItem]="1">
                    <a ngbNavLink class="nav-link fw-medium">
                        <i class="ci-unlocked me-2 mt-n1"> </i>
                        {{"MENUITEMS.IDENTIFICATION.LIST.SignIn"|translate}}
                    </a>
                    <ng-template ngbNavContent>
                        <form class="needs-validation tab-pane fade show active" autocomplete="off"
                            [formGroup]="loginForm" (ngSubmit)="onSubmit()">
                            <!-- <div class="mb-3">
                                <label class="form-label" for="si-email">Email address</label>
                                <input class="form-control" type="email" id="si-email" placeholder="johndoe@example.com"
                                    required formControlName="email"
                                    [ngClass]="{ 'is-invalid': submitted && f['email'].errors }">
                                <div class="invalid-feedback">Please provide a valid email address.</div>
                            </div> -->
                            <div class="mb-3">
                                <label class="form-label" for="si-email">{{"MENUITEMS.IDENTIFICATION.LIST.Username"|translate}}</label>
                                <input class="form-control" type="test" id="si-email" placeholder='{{"MENUITEMS.IDENTIFICATION.LIST.Username"|translate}}' required
                                    formControlName="email" [(ngModel)]="loginuser.username"
                                    [ngClass]="{ 'is-invalid': submitted && f['email'].errors }">
                                <div class="invalid-feedback">{{"MENUITEMS.IDENTIFICATION.LIST.ProvideUsername"|translate}}</div>
                            </div>
                            <div class="mb-3">
                                <label class="form-label" for="si-password">
                                    {{"MENUITEMS.IDENTIFICATION.LIST.Password"|translate}}
                                    <!-- {{loginPassfield}} -->
                                </label>
                                <div class="password-toggle">
                                    <input class="form-control" [type]="loginPassfield ? 'text' : 'password'"
                                        id="si-password" required formControlName="password" [(ngModel)]="loginuser.password"
                                        [ngClass]="{ 'is-invalid': submitted && f['password'].errors }">
                                        <div class="invalid-feedback">{{"MENUITEMS.IDENTIFICATION.LIST.ProvidePassword"|translate}}</div>
                                    <label class="password-toggle-btn" aria-label="Show/hide password">
                                        <input class="password-toggle-check" type="checkbox"><span
                                            class="password-toggle-indicator"
                                            [ngClass]="{'mdi-eye-off-outline': !loginPassfield, 'mdi-eye-outline': loginPassfield}"
                                            (click)="toggleLoginPassField()"></span>
                                    </label>
                                </div>
                            </div>
                            <div class="mb-3 d-flex flex-wrap justify-content-between">
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="checkbox" id="si-remember">
                                    <label class="form-check-label" for="si-remember">{{"MENUITEMS.IDENTIFICATION.LIST.RememberMe"|translate}}</label>
                                </div>
                                <a class="fs-sm" href="javascript:void(0);">{{"MENUITEMS.IDENTIFICATION.LIST.ForgotPassword"|translate}}</a>
                            </div>
                            <button class="btn btn-primary btn-shadow d-block w-100" type="submit">{{"MENUITEMS.IDENTIFICATION.LIST.SignInButton"|translate}}</button>
                        </form>
                    </ng-template>
                </li>
                <li [ngbNavItem]="2" *ngIf="false">
                    <a ngbNavLink class="nav-link fw-medium"><i class="ci-user me-2 mt-n1"></i>Sign up</a>
                    <ng-template ngbNavContent>
                        <form class="needs-validation tab-pane fade show active" autocomplete="off"
                            [formGroup]="SignupForm" (ngSubmit)="SignupSubmit()">
                            <div class="mb-3">
                                <label class="form-label" for="su-name">Full name</label>
                                <input class="form-control" type="text" id="su-name" placeholder="John Doe" required
                                    formControlName="name" [ngClass]="{ 'is-invalid': submit &&
                    fa['name'].errors }">
                                <div class="invalid-feedback">Please fill in your name.</div>
                            </div>
                            <div class="mb-3">
                                <label for="su-email">Email address</label>
                                <input class="form-control" type="email" id="su-email" placeholder="johndoe@example.com"
                                    required formControlName="email" [ngClass]="{ 'is-invalid': submit &&
                    fa['email'].errors }">
                                <div class="invalid-feedback">Please provide a valid email
                                    address.</div>
                            </div>
                            <div class="mb-3">
                                <label class="form-label" for="su-password">Password</label>
                                <div class="password-toggle">
                                    <input class="form-control" [type]="signupPassfield ? 'text' :
                      'password'" id="su-password" required formControlName="password" [ngClass]="{ 'is-invalid': submit
                      && fa['password'].errors }">
                                    <label class="password-toggle-btn" aria-label="Show/hide
                      password">
                                        <input class="password-toggle-check" type="checkbox"><span
                                            class="password-toggle-indicator" [ngClass]="{'mdi-eye-off-outline': !signupPassfield,
                        'mdi-eye-outline': signupPassfield
                        }" (click)="togglesignupPassfield()"></span>
                                    </label>
                                </div>
                            </div>
                            <div class="mb-3">
                                <label class="form-label" for="su-password-confirm">Confirm
                                    password</label>
                                <div class="password-toggle">
                                    <input class="form-control" [type]="signupCPassfield ? 'text'
                      : 'password'" id="su-password-confirm" required>
                                    <label class="password-toggle-btn" aria-label="Show/hide
                      password">
                                        <input class="password-toggle-check" type="checkbox"><span
                                            class="password-toggle-indicator" [ngClass]="{'mdi-eye-off-outline': !signupCPassfield,
                        'mdi-eye-outline': loginPassfield
                        }" (click)="togglesignupCPassfield()"></span>
                                    </label>
                                </div>
                            </div>
                            <button class="btn btn-primary btn-shadow d-block w-100" type="submit">Sign up</button>
                        </form>
                    </ng-template>
                </li>
            </ul>
            <button class="btn-close" type="button" data-bs-dismiss="modal" aria-label="Close" (click)="modal.close()"
                id="modalclose"></button>
        </div>
        <div class="modal-body tab-content py-4">
            <div [ngbNavOutlet]="nav" class="mt-2"></div>
        </div>
    </div>
</ng-template>

<div (window:scroll)="windowScroll()" id="home">
    <header class="bg-light shadow-sm fixed-top" data-fixed-element>
        <div class="navbar navbar-expand-lg navbar-light">
            <div class="container-fluid">
                <a class="navbar-brand d-none d-sm-block me-3 me-xl-4 flex-shrink-0" href="javascript:;" (click) ="goto()">
                    <img src="assets/img/logo-dark.png" width="142" alt="Sml logo">
                </a>
                <a class="navbar-brand d-sm-none me-2" href="javascript:;" (click) ="goto()">
                    <img src="assets/img/logo-icon.png" width="74" alt="Sml logo">
                </a>
                <!-- Search-->
                <div class="input-group d-none d-lg-flex flex-nowrap mx-4"><i
                        class="ci-search position-absolute top-50 start-0 translate-middle-y ms-3"></i>
                    <input class="form-control rounded-start w-100" type="text" [(ngModel)]="searchLabel"
                        placeholder='{{"MENUITEMS.HEADER.LIST.SearchForProducts"|translate}}' (keyup.enter)="onSearch()"
                    >
                    <!-- <select class="form-select flex-shrink-0" style="width: 14rem;">
                        <option>All categories</option>
                        <option>Bakery</option>
                    </select> -->
                </div>
                <!-- Toolbar-->
                <div class="navbar-toolbar d-flex flex-shrink-0 align-items-center ms-xl-2">
                    <button class="navbar-toggler" type="button" data-bs-toggle="offcanvas" data-bs-target="#sideNav"
                        (click)="open()"><span class="navbar-toggler-icon"></span></button>
                    <a class="navbar-tool d-flex d-lg-none" href="javascript:void(0);" data-bs-toggle="collapse"
                        (click)="collapse.toggle()" role="button" aria-expanded="false" aria-controls="searchBox"><span
                            class="navbar-tool-tooltip">Search</span>
                        <div class="navbar-tool-icon-box"><i class="navbar-tool-icon ci-search"></i></div>
                    </a><a class="navbar-tool d-none d-lg-flex" routerLink="/account/wishlist"><span
                            class="navbar-tool-tooltip">{{"MENUITEMS.HEADER.LIST.WishList"|translate}}</span>
                        <div class="navbar-tool-icon-box"><i class="navbar-tool-icon ci-heart"></i></div>
                    </a>

                    <div class="navbar-tool dropdown ms-3">
                        <a *ngIf="!_isLoggedIn" id="sign-in" class="navbar-tool ms-1 ms-lg-0 me-n1 me-lg-2"
                                        href="javascript:void(0);" data-bs-toggle="modal" (click)="toggleModal(toggleFirstModal)">
                                        <div class="navbar-tool-icon-box"><i class="navbar-tool-icon ci-user"></i></div>
                                        <div class="navbar-tool-text ms-n3"><small>{{"MENUITEMS.HEADER.LIST.Hello"|translate}}, {{"MENUITEMS.IDENTIFICATION.LIST.SignIn"|translate}}</small>{{"MENUITEMS.HEADER.LIST.MyAccount"|translate}}</div>
                                    </a>
                                    <a *ngIf="_isLoggedIn" class="navbar-tool ms-1 ms-lg-0 me-n1 me-lg-2">
                                        <div class="navbar-tool-icon-box"><i class="navbar-tool-icon ci-user"></i></div>
                                        <div class="navbar-tool-text ms-n3"><small>{{"MENUITEMS.HEADER.LIST.Hello"|translate}}, {{user.username}}</small>{{"MENUITEMS.HEADER.LIST.MyAccount"|translate}}</div>
                                    </a>
                        <div *ngIf="_isLoggedIn" class="dropdown-menu dropdown-menu-end">
                            <div class="widget widget-cart px-3 pt-2 pb-3" style="width: 20rem;">
                                <div style="height: 15rem;" data-simplebar data-simplebar-auto-hide="false">
                                    <div class="ps-2">
                                        <h6 class="widget-product-title border-bottom">
                                            <a href="/grocery/proposal">{{"MENUITEMS.PROPOSAL.TEXT" | translate}}</a>
                                        </h6>
                                        <h6 class="widget-product-title border-bottom">
                                            <a href="/grocery/invoice">{{"MENUITEMS.INVOICE.TEXT" | translate}}</a>
                                        </h6>
                                        <h6 class="widget-product-title border-bottom">
                                            <a href="javascript:;" (click) ="onlogOut()">{{"MENUITEMS.LOGOUT.TEXT" | translate}}</a>
                                        </h6>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="navbar-tool dropdown ms-3"><a class="navbar-tool-icon-box bg-secondary dropdown-toggle"
                            routerLink="/grocery/checkout"><span class="navbar-tool-label">{{mycart?.length}}</span><i
                                class="navbar-tool-icon ci-cart"></i></a><a class="navbar-tool-text"
                            routerLink="/grocery/checkout"><small>{{"MENUITEMS.HEADER.LIST.MyCart"|translate}}</small>€{{subtotal}} HT</a>
                        <div class="dropdown-menu dropdown-menu-end">
                            <div class="widget widget-cart px-3 pt-2 pb-3" style="width: 20rem;">
                                <div style="height: 15rem;" data-simplebar data-simplebar-auto-hide="false">
                                    <div *ngFor="let cart of mycart;let i = index;"
                                        class="widget-cart-item pb-2 border-bottom" (click)="gotodetail(i)">
                                        <button class="btn-close text-danger" type="button" aria-label="Remove"
                                            (click)="removecart(i)"><span aria-hidden="true">&times;</span></button>
                                        <div class="d-flex align-items-center">
                                            <a *ngIf="cart.image" class="d-block" href="javascript:void(0);">
                                                <img src="{{cart.image}}" width="64" alt="Product">
                                            </a>
                                            <div class="ps-2">
                                                <h6 class="widget-product-title"><a
                                                        href="javascript:void(0);">{{cart.title || cart.label}}</a></h6>
                                                <div class="widget-product-meta">
                                                    <span
                                                        class="text-accent me-2 price">${{cart.price | number:'.2'}}</span>
                                                        <span
                                                        class="text-muted">x {{cart.qty}} HT</span>
                                                </div>
                                                <div class="widget-product-meta">
                                                    <span
                                                        class="text-accent me-2 price">${{cart.price_ttc | number:'.2'}}</span>
                                                        <span
                                                        class="text-muted">x {{cart.qty}} TTC</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="d-flex flex-wrap justify-content-between align-items-center pt-3">
                                    <div class="fs-sm me-2 py-2"><span class="text-muted">{{"MENUITEMS.HEADER.LIST.Total"|translate}} HT:</span>
                                        <span
                                            class="text-accent fs-base ms-1">€{{subtotal}}</span>
                                        </div>
                                        <div class="fs-sm me-2 py-2"><span class="text-muted">{{"MENUITEMS.HEADER.LIST.Total"|translate}} TTC:</span>
                                            <span
                                                class="text-accent fs-base ms-1">€{{subtotal_ttc}}</span>
                                            </div>
                                            <a
                                        class="btn btn-primary btn-sm" routerLink="/grocery/checkout"><i
                                            class="ci-card me-2 fs-base align-middle"></i>{{"MENUITEMS.HEADER.LIST.CheckOut"|translate}}<i
                                            class="ci-arrow-right ms-1 me-n1"></i></a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Search collapse-->
        <div #collapse="ngbCollapse" [(ngbCollapse)]="isCollapsed" class="collapse" id="searchBox">
            <input class="form-control rounded-start w-100" type="text" [(ngModel)]="searchLabel"
                        placeholder='{{"MENUITEMS.HEADER.LIST.SearchForProducts"|translate}}' (keyup.enter)="onSearch()"
                    >
        </div>
    </header>
</div>